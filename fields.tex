
\section{Record Properties}

This section describes the record properties and their fields and attributes.

%each field should have:
% name
% precise semantic description
% should be included or not
% alternative/previous/discussed names
% examples

% record metadata

\subsection{RecordIdentity}

This property describe the identity of the record. The field has to attributes:
recordId and createTime. The recordId attribute of the type string and should
be constructed in such a way that it is globally unique and records with the
same value is not generated accidentally. Hence this field can be used to identify
the record, and provide a basis for duplicate detection. The createTime
attribute is an ISO timestamp describing when the record was created.

The field is similar to the field with the same name in the Usage Record
standard.

\begin{itemize}
\item The RecordIdentity property MUST be present in the record.
\item The RecordIdentity field MUST NOT have any value.
\item The recordId attribute MUST be present in the record.
\item The recordId attribute MUST have the type string.
\item The createTime attribute MUST be present in the record.
\item The createTime attribute MUST be an ISO timestamp.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:RecordIdentity
ns:createTime="2010-11-09T09:06:52Z"
ns:recordId="host.example.org/sr/87912469269276"/>
\end{verbatim}

% where block

\subsection{StorageSystem}

This property describes the storage system on which the resources has been
consumed. This value should be chosen in such a way that it globally
identifies the storage system, on which resource is being consumed. E.g., the
FQDN of the storage system could be used.

In grid lingo, this would be a storage element.

\begin{itemize}
\item The StorageSystem property SHOULD be present in the record.
\item The StorageSystem field MUST have the type string.
\item The StorageSystem value SHOULD be constructed in such a way, that it
    globally identifies the storage system.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:StorageSystem>host.example.org</ns:StorageSystem>
\end{verbatim}


\subsection{StorageShare}

This property describes the part of of the storage system which is accounted
for in the record. For a storage system, which is split into several logical
parts, this can be used to account for consumption on each of these parts.
The value should be able to identity the share of the storage system, given
the storage system property.

This property has previously been named StoragePartition.

\begin{itemize}
\item The StorageShare field type MUST be a string.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:StorageShare>pool-003</ns:StorageShare>
\end{verbatim}


\subsection{StorageType}

This property describes which type of storage is accounted for in the record,
e.g., ''disk'' or tape. This allows for explicit accounting for different types for
backend store.

\begin{itemize}
\item The StorageType field type MUST be a string.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:StorageType>disk</ns:StorageType>
\end{verbatim}


% what block

\subsection{StorageClass}

This property describes the class of the stored data, e.g., "pinned",
"replicated", "precious". This is a descriptive value, which allows the storage
system to provide details about the stored data.

\begin{itemize}
\item The StorageClass field type MUST be a string.
\item The following values MUST be 
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:StorageClass>replicated</ns:StorageClass>
\end{verbatim}


\subsection{FileCount}

This property describes the number of files which are accounted for in the
record.

\begin{itemize}
\item The FileCount field type MUST be in integer.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:FileCount>4</ns:FileCount>
\end{verbatim}



\subsection{DirectoryPath}

This property describe the directory path being accounted for (if available).

\begin{itemize}
\item The DirectoryPath field type MUST be a string.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:DirectoryPath>/projectA</ns:DirectoryPath>
\end{verbatim}


% identity block

\subsection{LocalUserName}

The local user name of the storage system accountable for the resource
consumption. Can be OS level or an internal user name in the storage system.

\begin{itemize}
\item The LocalUserName field type MUST be a string.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:LocalUserName>johndoe</ns:LocalUserName>
\end{verbatim}


\subsection{LocalUserGroup}

The local user group of the storage system accountable for the resource
consumption. Can be OS level or an internal group in the storage system.

\begin{itemize}
\item The LocalGroupName field type MUST be a string.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:LocalGroupName>binarydataproject</ns:LocalGroupName>
\end{verbatim}


\subsection{UserIdentity}

The global identity of the user accountable for the resource consumption. The
property should identity the user globally, such that clashes does not happen
accidentally, e.g., it could be an X509 identity.

\begin{itemize}
\item The UserIdentity field type MUST be a string.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:UserIdentity>/O=Grid/OU=example.org/CN=John Doe</ns:UserIdentity>
\end{verbatim}


\subsection{Group}

The global group accountable for the resource consumption. The property should
identify the group globally, such that clashes does not happen accidentally,
e.g., using a FQDN to construct it. In grid terms, this would typically be the
VO name.

\begin{itemize}
\item The Group field type MUST be a string.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:Group>binarydataproject.example.org</ns:Group>
\end{verbatim}


\subsection{GroupPartition}

The part of a group accountable for the resource consumption. This is useful
in some projects which has several sub-groups where each group is accountable
for their resource consumption. In grid terms this would typically be a group
within a VO.

\begin{itemize}
\item The GroupPartition field type MUST be a string.
\item The Group property MUST exist in the record of GroupPartition is
    specified.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:GroupPartition>ukusers</ns:GroupPartition>
\end{verbatim}


\subsection{GroupRole}

The role of the group accountable for resource consumption. Roles are sometimes
used to denote special tasks within a group or similar. In grid terms, this
would be the role in a VO.

\begin{itemize}
\item The GroupRole field type MUST be a string.
\item The Group property MUST exist in the record of GroupRole is specified.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:GroupRole>analysis</ns:GroupRole>
\end{verbatim}


\subsection{GroupAuthority}

The authority which the group is created under. This can be useful, if there
are group name clashes, or to see the group authority in certain security
infrastructures. In grid terms, this would be CA issuing the certificate for the
group.

\begin{itemize}
\item The GroupRole field type MUST be a string.
\item The GroupRole property MUST exist in the record of GroupPartition is
    specified.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:GroupAuthority>/O=Grid/OU=example.org/CN=host/auth.example.org
</ns:GroupAuthority>
\end{verbatim}


% consumption block

\subsection{MeasureTime}

A timestamp indicating when the measurement of the resource consumption was
made.

\begin{itemize}
\item The MeasureTime field SHOULD be present in the record.
\item The MeasureTime field type MUST be an ISO timestamp.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:MeasureTime>2010-10-11T09:31:40Z</ns:MeasureTime>
\end{verbatim}


\subsection{ValidDuration}

A duration indicating for how long time the measurement is valid.

\begin{itemize}
\item The ValidDuration field type MUST be an ISO duration.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:ValidDuration>PT3600S</ns:ValidDuration>
\end{verbatim}


\subsection{SpaceAllocated}

An integer denoting the number of bytes used on the storage system. This is the
main metric for measuring resource consumption. It should include all resources
consumed, including reserved space.

\begin{itemize}
\item The SpaceAllocated property SHOULD be present in the record.
\item The SpaceAllocated field type MUST be an integer.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:SpaceAllocated>13617</ns:SpaceAllocated>
\end{verbatim}

\subsubsection*{Implementation Note}

Using bytes saves us from the argument of discussing if 1000 or 1024 should be
used as a base. However, this also means that the number reported can be very
high. Therefore any implementation should use at least a 64-bit integer to hold
this variable. However it is highly recommend to use a data type with no upper
limits (a signed 64-bit integer will overflow at 8 Terabyte).


\subsection{SpaceReserved}

An integer denoting the number of bytes reserved on the storage system, i.e.,
space which has been allocated, but which is not filled with actual data. This
amount should be included in the SpaceAllocated property, but this field can be
used to describe exactly how much of the allocated space is reserved.

\begin{itemize}
\item The SpaceReserved field type MUST be an integer.
\end{itemize}

{\bf Example}
\begin{verbatim}
<ns:SpaceReserved>617</ns:SpaceReserved>
\end{verbatim}


\section{Intentionally Left Out Properties}

Note: These are still under discussion.

These should be removed in the final standard, but are in the draft for
discussion purposes.

\begin{description}

\item[Site] This property would identify the site, as which the storage system
is located, allowing easy grouping of several storage systems. However such a
grouping is often defined elsewhere, and is not always static.

\item[FileNames] Providing a list of file names in a record, would allow
per-file accounting, or allow certain files to be accounted for separately.
However the number of files stored can be very large, and file names occasionally
contain sensitive information.

\item[SpaceAvailable] This property would describe how much space is available
for the identity on the storage system. This property would however not report
any form of consumption, and can be a very tricky number to report.

\item[Transfer Information] The original suggestion included properties for
describing how much data has been transferred. There are however a range of
issues with this: A. network resources are not storage resources. B:


\item[StartTime / EndTime] Has been replaced measurement time and valid
duration as it was not really known when the actual measurement of the resource
consumption was taken.

\end{description}


