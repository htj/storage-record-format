\section{Introduction}

\subsection{Measuring Storage Resource Consumption}

% storeage resource intro
Measuring consumption of storage resources is distinctively different from
the measurement of the consumption of computing resources in batch jobs. 
While jobs typically have exclusive access
to a set of resources (CPU cores) for a given amount of time, a storage
resource is almost always shared
among several parties, with each of these participants using a part of the
resource. Furthermore, the usage of each participant will vary over time, and as
data tend to be long-lived there is no fixed start and end time of the resource
consumption.

% integrals and spikes
To exactly measure the amount of consumed resource\ldots

\subsection{Context}
The specifications that are made in the following are based
on a context that the reader needs to comprehend.
\begin{itemize}
 \item A \textit{storage resource} is a logical resource (either local or distributed) 
that allows an individual user or a group of users to store data. Such a system 
can contain single disks or can be created by pooling together physical storage 
media. This is transparent to the user and does not need to be considered when 
accounting for resource consumption.
 \item \textit{Storage accounting} is the recording and summarizing of the 
consumption of a storage resource by an individual user or a group of users in a 
specified time frame.
\end{itemize}

\subsection{What this document is not}
This document does not address in detail how these records should be used, 
how the accounting data are aggregated 
nor does it attempt to dictate the format in which the accounting records are 
stored at a local site. 
Furthermore, nothing is said regarding the communication mechanisms
employed to exchange the records, i.e. transport layer, framing, 
authentication, integrity, etc.


\subsection{Conventions Used in this Document}
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
"SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and 
"OPTIONAL" in this document are to be interpreted as described in
RFC 2119 \cite{rfc2119}.


\subsection{Record Structure \& Content}

The structure of the format described in this document can be split into
logical parts, each describing an aspect of the resource consumption.

The parts are:

\begin{description}

\item[Resource] Fields describing the system the resource was consumed on. They 
can specify a certain subsystem of the storage system.

\item[Consumption Details] Fields describing what the data is consuming, e.g. 
storage classes, directory path, etc.

\item[Identity] Describes the person or group accountable for the resource
consumption.

\item[Resource Consumption] Fields describing how much of the described
resource has been used.

\end{description}

Please note, that these logical sections are not necessarely directly reflected
in record format. They are merely a good mental model to have in mind.

Most of the information in the record is common to all files, e.g., resource or
identity description. Certain fields are aggregates over the consumed
resources. This includes the consumption itself, but can also be consumption
details, such as number of files.

The record is not intended to be used for describing intricate information
about the consumption. E.g., files names or per-file data, or application
metadata should not be included in the record. Such details are out of scope
for the record, and are not important for accounting of resource consumption.

To see examples of records, see Section~\ref{sec:record-examples}


% this might be a seperate section sometime, for now it is here
\subsection{Including Additional Information}

It is allowed to add additional fields with information in the record, e.g.,
for more accurate description of the data that has consumed the resources.

If any user or group information is added it must be added under the
SubjectIdentity block. This makes it possible to automatically remove user
and group information.

